#!/bin/sh

set -o errexit
set -o nounset

codebase=$(git rev-parse --show-toplevel)
readonly codebase

docker run \
  --env DEFAULT_BRANCH="$(git symbolic-ref refs/remotes/origin/HEAD | cut -d/ -f4)" \
  --env IGNORE_GITIGNORED_FILES=true \
  --env RUN_LOCAL=true \
  --env VALIDATE_JSCPD=false \
  --volume "${codebase?}:/tmp/lint" \
  github/super-linter:slim-v4

#!/bin/sh

set -o errexit
set -o nounset

readonly VERSION=2.4.0

if [ ! -s "ec-${VERSION}" ]; then
  temp="$(mktemp -d)"
  trap 'rm -rf "${temp}"' EXIT
  curl -fLsS "https://github.com/editorconfig-checker/editorconfig-checker/releases/download/${VERSION}/ec-{{ .chezmoi.os }}-{{ .chezmoi.arch }}.tar.gz" |
    tar -C "${temp}" -xzf -
  mv "${temp}/bin/ec-{{ .chezmoi.os }}-{{ .chezmoi.arch }}" "ec-${VERSION}"
fi
chmod +x "ec-${VERSION}"
ln -sf "ec-${VERSION}" ec

# vim: ft=sh
